<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width,initial-scale=1.0,minimum-scale=1.0,maximum-scale=1.0,user-scalable=no">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <title>星座运势</title>
</head>

<body>
    <div class="warp" id='result'>
        <div class="topHeader">
            <div class="topContent">
                <a href="#" class="topHeaderLeft" onClick="javascript :history.back(-1)">
                    <img src="../img/arr-left.png" alt="" srcset="">
                </a>
                <span href="" class="headerTittle">星座解析</span>
                <a href="#" onClick="btnDialog()">
                    <img src="../img/share.png" alt="" srcset="">
                </a>
            </div>
        </div>

        <div class="XZ-Analysis">
            <div class="XZ-Analysis-Top">
                <img :src="xzItem.big_logo" alt="" srcset="">
                <span> {{xzItem.name}}</span>
                <span> {{xzItem.betweens}}</span>
            </div>
        </div>

        <div class="XZ-AnalysisMiddle">
            <div class="XZ-AnalysisMiddle-Content">
                <ul class="XZ-item">
                    <li>
                        <span>幸运值</span>
                        <p>{{xzList.xyz}}</p>
                    </li>
                    <li>
                        <span>爱情指数</span>
                        <p>{{xzList.aqzs}}</p>
                    </li>
                    <li>
                        <span>工作指数</span>
                        <p>{{xzList.gzzs}}</p>
                    </li>
                    <li>
                        <span>财运指数</span>
                        <p>{{xzList.cyzs}}</p>
                    </li>
                    <li>
                        <span>健康指数</span>
                        <p>{{xzList.jkzs}}</p>
                    </li>
                    <li>
                        <span>幸运数字</span>
                        <p>{{xzList.xysz}}</p>
                    </li>
                    <li>
                        <span>幸运颜色</span>
                        <p>{{xzList.color}}</p>
                    </li>
                    <li>
                        <span>贵人星座</span>
                        <p>{{xzList.peixz}}</p>
                    </li>
                </ul>
            </div>
            <div class="XZ-fenxi">

                <div class="XZ-fenxi-top">
                    <h1>综合运势</h1>
                    <div>
                        <img :src="v" alt="" srcset="" v-for='(v,i) in xzList.zh_zs' :key='i'>
                    </div>
                </div>
                <div class="XZ-fenxi-content">{{xzList.zhys}}</div>
            </div>

            <div class="XZ-fenxi">
                <div class="XZ-fenxi-top">
                    <h1>爱情运势</h1>
                    <div>
                        <img :src="v" alt="" srcset="" v-for='(v,i) in xzList.ay_zs' :key='i'>
                    </div>
                </div>
                <div class="XZ-fenxi-content">{{xzList.aqys}}</div>
            </div>

            <div class="XZ-fenxi">
                <div class="XZ-fenxi-top">
                    <h1>事业运势</h1>
                    <div>
                        <img :src="v" alt="" srcset="" v-for='(v,i) in xzList.sy_zs' :key='i'>

                    </div>
                </div>
                <div class="XZ-fenxi-content">{{xzList.syys}}</div>
            </div>
            <div class="XZ-fenxi">
                <div class="XZ-fenxi-top">
                    <h1>财富运势</h1>
                    <div>
                        <img :src="v" alt="" srcset="" v-for='(v,i) in xzList.cf_zs' :key='i'>
                    </div>
                </div>
                <div class="XZ-fenxi-content">{{xzList.cfys}}</div>
            </div>
            <div class="XZ-fenxi">
                <div class="XZ-fenxi-top">
                    <h1>健康运势</h1>
                    <div>
                        <img :src="v" alt="" srcset="" v-for='(v,i) in xzList.jk_zs' :key='i'>

                    </div>
                </div>
                <div class="XZ-fenxi-content">{{xzList.jkys}}</div>
            </div>

        </div>
    </div>

    <!-- 弹框 -->
    <div class="HH-Dialog ">
        <div class="content XZ-Dialog-Bg">
            <div class="content-close">
                <img src="../img/close.png" alt="" onclick="hideDialog()">
            </div>
            <div class="content-tittle pt30">星座解析</div>
            <div class="content-text">
                <p>
                    丁祎与丁娜娜八字喜用神恰好互补，两个具有吸引力，易于相处，互相帮助。丁祎比劫强，丁娜娜官杀强，十神关系上有互补，两人互相平衡，协调发展。
                    二位命卦组成延年'，此为上等婚，可和睦相处，白头到老。
                    丁祎:命卦:巽四(东四命) ;丁娜娜:命卦:震三(东四命)

                    天蝎座与射手座组合一般。
                </p>

            </div>
            <div class="HH-code">
                <p><span>13</span>2020 Sept.</p>
                <img src="../img/code.png" alt="" srcset="">
            </div>

            <div class="footer XZ-footerBg down" download="downImg">保存到相册转发朋友圈或好友</div>
        </div>

    </div>

    <!-- <script src="../js/html2canvas.js"></script> -->
    <script src="../js/html2canvas.min.js"></script>
    <script src="../js/jquery-3.4.1.js"></script>
    <script>
        let shareDialog = document.querySelector(".HH-Dialog")

        function btnDialog() {
            shareDialog.style.display = "block"
        }

        function hideDialog() {
            shareDialog.style.display = "none"
        }

        $(function () {
            $(".down").click(function () {
                alert('1111')
                html2canvas($(".HH-Dialog")[0]).then(function (canvas) {
                    var imgUri = canvas.toDataURL("image/png").replace("image/png",
                        "image/octet-stream"); // 获取生成的图片的url
                    window.location.href = imgUri; // 下载图片
                });

            });
        });
    </script>


    <script src="https://cdn.staticfile.org/vue/2.4.2/vue.min.js"></script>
    <script>
        var vue = new Vue({
            el: '#result',
            data: {
                xzItem: [],
                xzList: []

            },
            methods: {

            },

            mounted: function () {

                //星座解析
                axios.post('http://h5.anhuiqingyou.com/xingzuo/info', {
                        id: localStorage.getItem('id')
                    })
                    .then((res) => {
                        console.log(res, '星座解析')
                        if (res.data.code == 0) {
                            this.xzItem = res.data.data.xingzuo
                            this.xzList = res.data.data.today_info
                        }

                    })
                    .catch(function (error) {
                        console.log(error);
                    });
            },

        })
    </script>





</body>

</html>